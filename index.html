<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MyAnimangalist - Track Anime & Manga</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header class="header">
        <div class="container">
            <div class="header__content">
                <h1 class="header__title">MyAnimangalist</h1>
                <p class="header__subtitle">Track your favorite anime and manga. Discover new titles and manage your progress in one place.</p>
                <div class="header__actions">
                    <button id="import-btn" class="btn btn--secondary btn--sm">Import Data</button>
                    <button id="export-btn" class="btn btn--secondary btn--sm">Export Data</button>
                </div>
            </div>
        </div>
    </header>

    <main class="main">
        <div class="container">
            <!-- Main Navigation Tabs -->
            <nav class="main-tabs">
                <div class="main-tabs__nav">
                    <button class="main-tab-btn active" data-main-tab="anime">
                        ðŸ“º Anime
                    </button>
                    <button class="main-tab-btn" data-main-tab="manga">
                        ðŸ“š Manga
                    </button>
                    <button class="main-tab-btn" data-main-tab="stats">
                        ðŸ“Š Statistics
                    </button>
                </div>
            </nav>

            <!-- Statistics Tab -->
            <section id="stats-tab" class="tab-content hidden">
                <div class="stats-dashboard">
                    <div class="stats__grid">
                        <div class="stat-card">
                            <div class="stat-card__number" id="total-entries">0</div>
                            <div class="stat-card__label">Total Entries</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number" id="completed-entries">0</div>
                            <div class="stat-card__label">Completed</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number" id="in-progress-entries">0</div>
                            <div class="stat-card__label">In Progress</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-card__number" id="avg-rating">0.0</div>
                            <div class="stat-card__label">Avg Rating</div>
                        </div>
                    </div>
                    
                    <div class="charts-container">
                        <div class="chart-section">
                            <h3>Distribution by Type</h3>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="type-chart"></canvas>
                            </div>
                        </div>
                        <div class="chart-section">
                            <h3>Status Distribution</h3>
                            <div class="chart-container" style="position: relative; height: 300px;">
                                <canvas id="status-chart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Anime Tab -->
            <section id="anime-tab" class="tab-content">
                <div class="media-section">
                    <!-- Search Section -->
                    <div class="search-section">
                        <div class="search-container">
                            <input type="text" id="anime-search" class="form-control search-input" placeholder="Search Jikan API for anime...">
                            <button id="anime-search-btn" class="btn btn--primary">Search</button>
                        </div>
                        <div id="anime-search-results" class="search-results hidden"></div>
                    </div>

                    <!-- Add Manual Entry -->
                    <div class="manual-entry">
                        <button id="add-anime-manual" class="btn btn--secondary">Add Anime Manually</button>
                    </div>

                    <!-- Filters - Always Visible -->
                    <div class="filters">
                        <select id="anime-status-filter" class="form-control">
                            <option value="">All Status</option>
                            <option value="Completed">Completed</option>
                            <option value="Watching">Watching</option>
                            <option value="Plan to Watch">Plan to Watch</option>
                            <option value="Dropped">Dropped</option>
                            <option value="On Hold">On Hold</option>
                        </select>
                        <select id="anime-rating-filter" class="form-control">
                            <option value="">All Ratings</option>
                            <option value="5">5 Stars</option>
                            <option value="4">4+ Stars</option>
                            <option value="3">3+ Stars</option>
                            <option value="2">2+ Stars</option>
                            <option value="1">1+ Stars</option>
                        </select>
                        <select id="anime-sort-filter" class="form-control">
                            <option value="dateAdded">Sort by Date Added</option>
                            <option value="title">Sort by Title</option>
                            <option value="rating">Sort by Rating</option>
                            <option value="status">Sort by Status</option>
                        </select>
                    </div>

                    <!-- Empty State Message -->
                    <div id="anime-empty-state" class="empty-state">
                        <h3>Search for anime above to get started</h3>
                        <p>Use the search box to find anime from the Jikan API and add them to your list!</p>
                    </div>

                    <!-- Anime Grid -->
                    <div id="anime-grid" class="entries-grid"></div>
                </div>
            </section>

            <!-- Manga Tab -->
            <section id="manga-tab" class="tab-content hidden">
                <div class="media-section">
                    <!-- Search Section -->
                    <div class="search-section">
                        <div class="search-container">
                            <input type="text" id="manga-search" class="form-control search-input" placeholder="Search Jikan API for manga...">
                            <button id="manga-search-btn" class="btn btn--primary">Search</button>
                        </div>
                        <div id="manga-search-results" class="search-results hidden"></div>
                    </div>

                    <!-- Add Manual Entry -->
                    <div class="manual-entry">
                        <button id="add-manga-manual" class="btn btn--secondary">Add Manga Manually</button>
                    </div>

                    <!-- Filters - Always Visible -->
                    <div class="filters">
                        <select id="manga-status-filter" class="form-control">
                            <option value="">All Status</option>
                            <option value="Reading">Reading</option>
                            <option value="Completed">Completed</option>
                            <option value="Plan to Read">Plan to Read</option>
                            <option value="Dropped">Dropped</option>
                            <option value="On Hold">On Hold</option>
                        </select>
                        <select id="manga-rating-filter" class="form-control">
                            <option value="">All Ratings</option>
                            <option value="5">5 Stars</option>
                            <option value="4">4+ Stars</option>
                            <option value="3">3+ Stars</option>
                            <option value="2">2+ Stars</option>
                            <option value="1">1+ Stars</option>
                        </select>
                        <select id="manga-sort-filter" class="form-control">
                            <option value="dateAdded">Sort by Date Added</option>
                            <option value="title">Sort by Title</option>
                            <option value="rating">Sort by Rating</option>
                            <option value="status">Sort by Status</option>
                        </select>
                    </div>

                    <!-- Empty State Message -->
                    <div id="manga-empty-state" class="empty-state">
                        <h3>Search for manga above to get started</h3>
                        <p>Use the search box to find manga from the Jikan API and add them to your list!</p>
                    </div>

                    <!-- Manga Grid -->
                    <div id="manga-grid" class="entries-grid"></div>
                </div>
            </section>
        </div>
    </main>

    <!-- Add/Edit Modal -->
    <div id="entry-modal" class="modal hidden">
        <div class="modal__overlay"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h3 id="modal-title">Add Entry</h3>
                <button class="modal__close" id="close-modal">&times;</button>
            </div>
            <div class="modal__body">
                <form id="entry-form" class="entry-form">
                    <input type="hidden" id="entry-id">
                    <input type="hidden" id="entry-type">
                    
                    <div class="form-row">
                        <div class="form-group">
                            <label for="entry-title" class="form-label">Title *</label>
                            <input type="text" id="entry-title" class="form-control" required>
                        </div>
                        <div class="form-group">
                            <label for="entry-year" class="form-label">Year</label>
                            <input type="number" id="entry-year" class="form-control" min="1900" max="2030">
                        </div>
                    </div>

                    <div class="form-row">
                        <div class="form-group">
                            <label for="entry-status" class="form-label">Status *</label>
                            <select id="entry-status" class="form-control" required>
                                <!-- Options will be populated dynamically -->
                            </select>
                        </div>
                        <div class="form-group">
                            <label class="form-label">Rating (1-5 Stars)</label>
                            <div class="rating-container">
                                <div class="star-rating" id="modal-star-rating"></div>
                                <span class="rating-value" id="rating-display">0</span>
                            </div>
                        </div>
                    </div>

                    <div class="form-row" id="progress-row">
                        <div class="form-group">
                            <label for="current-progress" class="form-label">Current Episodes/Chapters</label>
                            <input type="number" id="current-progress" class="form-control" min="0">
                        </div>
                        <div class="form-group">
                            <label for="total-progress" class="form-label">Total Episodes/Chapters</label>
                            <input type="number" id="total-progress" class="form-control" min="0">
                        </div>
                    </div>

                    <div class="form-group">
                        <label for="entry-genres" class="form-label">Genres</label>
                        <input type="text" id="entry-genres" class="form-control" placeholder="Action, Adventure, Drama">
                    </div>

                    <div class="form-group">
                        <label for="entry-synopsis" class="form-label">Synopsis</label>
                        <textarea id="entry-synopsis" class="form-control" rows="3" placeholder="Brief description..."></textarea>
                    </div>

                    <div class="form-group">
                        <label for="entry-notes" class="form-label">Personal Notes</label>
                        <textarea id="entry-notes" class="form-control" rows="2" placeholder="Your thoughts..."></textarea>
                    </div>

                    <div class="form-actions">
                        <button type="submit" class="btn btn--primary" id="save-entry-btn">Save Entry</button>
                        <button type="button" class="btn btn--secondary" id="cancel-entry">Cancel</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="confirm-modal" class="modal hidden">
        <div class="modal__overlay"></div>
        <div class="modal__content modal__content--small">
            <div class="modal__header">
                <h3 id="confirm-title">Confirm Action</h3>
                <button class="modal__close" id="close-confirm-modal">&times;</button>
            </div>
            <div class="modal__body">
                <p id="confirm-message">Are you sure you want to proceed?</p>
                <div class="form-actions">
                    <button class="btn btn--primary" id="confirm-yes">Yes</button>
                    <button class="btn btn--secondary" id="confirm-no">Cancel</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Import Modal -->
    <div id="import-modal" class="modal hidden">
        <div class="modal__overlay"></div>
        <div class="modal__content">
            <div class="modal__header">
                <h3>Import Data</h3>
                <button class="modal__close" id="close-import-modal">&times;</button>
            </div>
            <div class="modal__body">
                <div class="import-options">
                    <div class="import-option">
                        <h4>Import from JSON</h4>
                        <p class="text-sm">Import your previously exported MyAnimangalist data</p>
                        <input type="file" id="json-file-input" accept=".json" class="form-control">
                        <button id="import-json" class="btn btn--primary">Import JSON</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Loading Overlay -->
    <div id="loading-overlay" class="loading-overlay hidden">
        <div class="loading-spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Toast Notifications -->
    <div id="toast-container" class="toast-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <script src="app.js"></script>
</body>
</html>